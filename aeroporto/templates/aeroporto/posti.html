<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block head_title %}Prenota-Starvato Airlines{% endblock head_title%}</title>
    {% load static %}
    <link rel="stylesheet" href="{% static 'style.css' %}">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/flickity/3.0.0/flickity.min.css" integrity="sha512-fJcFDOQo2+/Ke365m0NMCZt5uGYEWSxth3wg2i0dXu7A1jQfz9T4hdzz6nkzwmJdOdkcS8jmy2lWGaRXl+nFMQ==" crossorigin="anonymous" referrerpolicy="no-referrer" />

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/meyer-reset/2.0/reset.min.css" integrity="sha512-NmLkDIU1C/C88wi324HBc+S2kLhi08PN5GDeUVVVC/BVt/9Izdsc9SVeVfA1UZbY3sHUlDSyRXhCzHfr6hmPPw==" crossorigin="anonymous" referrerpolicy="no-referrer" />

    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;700;900&display=swap" rel="stylesheet">
    
    <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>

    <script>
        const BASE_URL = "http://127.0.0.1:8000/"
        const URL_PERSONALE = BASE_URL + "dipendenti/" 
        const URL_AEROPORTI = BASE_URL + "aeroporti/"
        const URL_AEROMOBILI = BASE_URL + "aeromobili/"
        const URL_VOLI = BASE_URL + "voli/"

        const Aeroporti = async () => {
            const response = await fetch('http://127.0.0.1:8000/aeroporti/');
            const myJson = await response.json(); //extract JSON from the http response
            // do something with myJson
            return myJson
        }
        Aeroporti().then(res => {
            console.log(res) 
        })

        const Aeromobili = async () => {
            const response = await fetch('http://127.0.0.1:8000/aeromobili/');
            const myJson = await response.json(); //extract JSON from the http response
            // do something with myJson
            return myJson
        }
        Aeromobili().then(res => {
            console.log(res)
        })

        const Voli = async () => {
            const response = await fetch('http://127.0.0.1:8000/voli/');
            const myJson = await response.json(); //extract JSON from the http response
            // do something with myJson
            return myJson
        }
        Voli().then(res => {
            console.log(res)
        })

        /* const Dipendenti = async () => {
            const response = await fetch('http://127.0.0.1:8000/dipendenti/');
            const myJson = await response.json(); //extract JSON from the http response
            // do something with myJson
            return myJson
        }
        console.log(Dipendenti().then(res => {
            console.log(res) 
        }))*/

        function Redirect(){
            let andata 
            if(document.getElementById("andata").value) {
                andata = document.getElementById("andata").value
            } else {
                andata = document.getElementById("andata_ritorno").value;
            }
            let data1 = document.getElementById("data1").value;
            let data2 = document.getElementById("data2").value;
            let aeroporto1 = document.getElementById("aeroporto1").value;
            let aeroporto2 = document.getElementById("aeroporto2").value;
            let viaggiatori = document.getElementById("viaggiatori").value;
            console.log(data1)
            console.log(data2)
            console.log(viaggiatori)
            //location.href = `/aeroporto/posti2?viaggiatori=${viaggiatori}&andata=${andata}&data_andata=${data1}
            //&data_ritorno=${data2}&aeroporto_di_partenza=${aeroporto1}&aeroporto_di_arrivo=${aeroporto2}`;
            location.href = '/aeroporto/posti2?viaggiatori='+viaggiatori+'&andata='+andata+'&data_andata='+data1.trim()+'\
            &data_ritorno='+data2.trim()+'&aeroporto_di_partenza='+aeroporto1+'&aeroporto_di_arrivo='+aeroporto2;
        }
    </script>
</head>
<body>

    <div class="header">
        <div class="logo">
            <img src="{% static 'logo3.jpg' %}" alt="">
        </div>
        <ul class="menu">
            <li><a href="{% url 'home' %}">Home</a></li>
            <li><a href="{% url 'prenota' %}">Prenota</a></li>
            <li><a href="{% url 'mie_prenotazioni' %}">Le mie prenotazioni</a></li>
            <li><a href="{% url 'registrati' %}">Registrati</a></li>
            <li><a href="">Aiuto</a></li>
        </ul>
        <div class="cta">
            <a href="{% url 'contattaci' %}" class="button">Contatti</a>
        </div> 
        
    </div>

    <div class="hero hero--small">
        <div class="hero__content">
            <h1 class="big-text">Prenota il tuo viaggio</h1>
        </div>
    </div>

    <div class="radio radios">
        <div class="form-check form-check-inline">
            <input class="form-check-input" type="radio" name="andata" id="andata" value="1">
            <label class="form-check-label" for="andata">Andata</label>
        </div>
        <div class="form-check form-check-inline">
            <input class="form-check-input" type="radio" name="andata" id="andata_ritorno" value="2">
            <label class="form-check-label" for="andata">Andata e Ritorno</label>
        </div>

        <span class="input-group-text normal-text" >Dal giorno: </span>
        <input class="form-control" type="date" id="data1">

        <span class="input-group-text normal-text" >Al giorno: </span>
        <input class="form-control" type="date" id="data2">

    </div>

    <div class="select">
        <select id="aeroporto1" class="form-select selectp tw" aria-label="Default select example">
            <option value="0" selected disabled>Partenza da:</option>
            {% for p in partenza %}
            <option value="{{p.nome}}">{{p}}</option>
            {% endfor %}

        </select>

        <select id="aeroporto2" class="form-select selectp tw" aria-label="Default select example">
            <option value="0" selected disabled>Arrivo a:</option>
            {% for p in arrivo %}
            <option value="{{p.nome}}">{{p}}</option>
            {% endfor %}
        </select>
    </div>

    <div class="radios">
        <h4 class="normal-text">NÂ° viaggiatori:</h4>
        <span class="input-group-text" ></span>
        <input class="form-control" type="number" name="adulti" id="viaggiatori">
    </div>

    
    <a class="button buttonp bold" onclick="Redirect()" type="button" class="btn btn-info button">Cerca</a>



<footer class="footer mt-3">

    <div class="grid">
        <div class="col">
            <h4 class="normal-text tw">Contatti telefonici</h4>
            <p>+39 331 565 90 64</p>
        </div>
        <div class="col">
            <h4 class="normal-text tw">Indirizzo E-mail</h4>
            <p>stefanobls7@gmail.com</p>
        </div>
        <div class="col">
            <h4 class="normal-text tw">Sede legale ed operativa</h4>
            <p>Pescara (PE) - Via Tirino,99 - 65129 </p>
        </div>
        <div class="col">
            <h4 class="normal-text tw">Prossimi eventi</h4>
            <p>. . .</p>
        </div>
    </div>

</footer>




<script src="https://cdnjs.cloudflare.com/ajax/libs/flickity/3.0.0/flickity.pkgd.min.js" integrity="sha512-achKCfKcYJg0u0J7UDJZbtrffUwtTLQMFSn28bDJ1Xl9DWkl/6VDT3LMfVTo09V51hmnjrrOTbtg4rEgg0QArA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>    

</body>
</html>